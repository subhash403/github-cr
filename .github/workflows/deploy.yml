name: Build and Test workflow for Spring Boot microservices

on:      
  workflow_call:
    inputs:
      # pass in environment through manual trigger, if not passed in, default to 'dev'
      env:
        required: true
        type: string
        default: 'dev'

jobs:
  uses: https://github.com/subhash403/github-reusable/blob/main/.github/workflows/github-cr.yaml@main
  with:
    run: echo "tag=$(git describe --tags $(git rev-list --tags --max-count=1))" > $GITHUB_ENV
  secrets: inherit
